(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-740c3e50"],{"89e1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{staticStyle:{height:"50vh"}},[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"form",staticStyle:{"padding-top":"5vh"},attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"关系来源"}},[a("el-select",{staticClass:"m-2",staticStyle:{width:"75px","margin-right":"15px"},attrs:{placeholder:"Select",size:"small"},model:{value:e.form.source,callback:function(t){e.$set(e.form,"source",t)},expression:"form.source"}},[a("el-option",{attrs:{label:"演员",value:"actor"}}),a("el-option",{attrs:{label:"导演",value:"director"}})],1)],1),a("el-form-item",{staticStyle:{"margin-top":"5vh"},attrs:{label:"合作对象"}},[a("el-input",{staticClass:"m-2",staticStyle:{width:"75px","margin-right":"15px"},attrs:{size:"small",readonly:!0},model:{value:e.form.target,callback:function(t){e.$set(e.form,"target",t)},expression:"form.target"}})],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"margin-left":"3vh","margin-top":"10px"},attrs:{type:"primary",size:"small",plain:""},on:{click:function(t){return e.search(e.form)}}},[e._v("查询")]),a("el-form",{ref:"form",staticStyle:{"padding-top":"5vh"},attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"最受关注(评论最多)的演员组合","label-width":"250px"}}),a("el-form-item",{attrs:{label:"电影类型"}},[a("el-autocomplete",{staticStyle:{width:"20vw"},attrs:{"fetch-suggestions":e.genreSearchSuggest,placeholder:"请输入电影类型",clearable:"",size:"small"},on:{select:e.handleSelect},model:{value:e.form.genre,callback:function(t){e.$set(e.form,"genre",t)},expression:"form.genre"}})],1)],1),a("el-button",{staticStyle:{"margin-left":"3vh","margin-top":"10px"},attrs:{type:"primary",size:"small",plain:""},on:{click:function(t){return e.searchPopular(e.form.genre)}}},[e._v("查询")])],1)],1),a("el-col",{attrs:{span:1}},[a("el-divider",{attrs:{direction:"vertical"}})],1),a("el-col",{attrs:{span:10}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"查询结果",name:"search"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.result,"element-loading-text":"正在为您查询...",stripe:"",height:"400"}},[a("el-table-column",{attrs:{prop:"name1",label:"合作者1",width:"100"}}),a("el-table-column",{attrs:{prop:"name2",label:"合作者2",width:"100"}}),a("el-table-column",{attrs:{prop:"times",label:"合作次数",width:"100"}})],1),a("el-row",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"prev, pager, next, jumper","current-page":e.currentPage,"page-size":5,"page-count":e.totalPage,small:""},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":function(t){return e.getNewPage(e.form)}}})],1)],1),a("el-tab-pane",{attrs:{label:"耗时对比",name:"speed"}},[a("div",{staticStyle:{width:"400px",height:"400px"},attrs:{id:"speed"}})])],1)],1)],1)],1)},o=[],n=(a("8180"),a("bddb"),{name:"RelationSearch",data:function(){return{activeName:"search",isLoading:!1,dialogVisible:!1,result:[],mysql_speed:0,spark_speed:0,neo4j_speed:0,dialogData:{asin:"1234",name:"11",director:["小明","小红","小黑","小白"],actor:["小蓝","小黄","小黑","小白"],score:2.5,commentNum:100},form:{source:"actor",target:"演员",name:"",times:5},currentPage:1,totalPage:0}},mounted:function(){this.echartsInit()},watch:{mysql_speed:{handler:function(e,t){this.mysql_speed=e,this.echartsInit()}},spark_speed:{handler:function(e,t){this.spark_speed=e,this.echartsInit()}},neo4j_speed:{handler:function(e,t){this.neo4j_speed=e,this.echartsInit()}}},methods:{handleSelect:function(e){console.log(e)},handleClick:function(e,t){console.log(e,t)},search:function(e){var t=this;"director"==e.source&&"director"==e.target?this.$message.warning("关系来源和合作对象不能同时为导演!"):(this.isLoading=!0,this.$axios.post("/relation/count",{source:e.source,page:1,per_page:5}).then((function(e){console.log("pages",e.pages),t.totalPage=e.pages})).catch((function(e){t.$message.error("当前mysql网络异常，请稍后再试")})),this.$axios.post("/relation/detail",{source:e.source,page:1,per_page:5}).then((function(e){console.log(e),t.result=e.data,console.log("mysql结果",t.result),t.mysql_speed=e.consuming_time,t.isLoading=!1})).catch((function(e){t.$message.error("当前mysql网络异常，请稍后再试")})),this.$axios.post("/hive/relation/detail",{source:e.source,page:1,per_page:5}).then((function(e){console.log(e),t.spark_speed=e.consuming_time})).catch((function(e){t.$message.error("当前spark网络异常，请稍后再试")})),"actor"==e.source?this.$axios.get("/neo4j/actors/frequent-actors",{params:{page:1,per_page:5}}).then((function(e){console.log(e),t.neo4j_speed=e.time})).catch((function(e){t.$message.error("当前neo4j网络异常，请稍后再试")})):"director"==e.source&&this.$axios.get("/neo4j/actors/frequent-directors",{params:{page:1,per_page:5}}).then((function(e){console.log(e),t.neo4j_speed=e.time})).catch((function(e){console.log(e),t.$message.error("当前neo4j网络异常，请稍后再试")})))},searchPopular:function(e){var t=this;this.isLoading=!0,this.$axios.get("/relation/popular",{params:{genre:e}}).then((function(e){console.log(e),t.result=e.data,console.log("mysql结果",t.result),t.mysql_speed=e.consuming_time,t.isLoading=!1})).catch((function(e){t.$message.error("当前mysql网络异常，请稍后再试")})),this.$axios.get("/neo4j/actors/most-attracted-group-2",{params:{genre:e}}).then((function(e){console.log(e),t.neo4j_speed=e.time})).catch((function(e){t.$message.error("当前neo4j网络异常，请稍后再试")})),this.$axios.get("/hive/relation/popular",{params:{genre:e}}).then((function(e){console.log(e),t.spark_speed=e.consuming_time})).catch((function(e){t.$message.error("当前spark网络异常，请稍后再试")}))},genreSearchSuggest:function(e,t){var a=this;this.$axios.get("/recommend/genre",{params:{genre:e||"",amount:10}}).then((function(e){console.log(e);for(var a=[],s=0;s<e.suggestions.length;s++)a.push({value:e.suggestions[s]});console.log("这是result",a),t(a)})).catch((function(e){a.$message.error("当前网络异常，请稍后再试")}))},getNewPage:function(e){var t=this;this.isLoading=!0,this.$axios.post("/relation/detail",{source:e.source,target:e.target,name:e.name,times:e.times,page:this.currentPage,per_page:5}).then((function(e){console.log(e),t.result=e.data,console.log(t.result),t.isLoading=!1,t.mysql_speed=e.consuming_time})).catch((function(e){t.$message.error("当前mysql网络异常，请稍后再试")})),this.$axios.post("/hive/relation/detail",{source:e.source,page:this.currentPage,per_page:5}).then((function(e){console.log(e),t.spark_speed=e.consuming_time})).catch((function(e){t.$message.error("当前spark网络异常，请稍后再试")})),"actor"==e.source?this.$axios.get("/neo4j/actors/frequent-actors",{params:{page:this.currentPage,per_page:5}}).then((function(e){console.log(e),t.neo4j_speed=e.time})).catch((function(e){t.$message.error("当前neo4j网络异常，请稍后再试")})):"director"==e.source&&this.$axios.get("/neo4j/actors/frequent-directors",{params:{page:this.currentPage,per_page:5}}).then((function(e){console.log(e),t.neo4j_speed=e.time})).catch((function(e){console.log(e),t.$message.error("当前neo4j网络异常，请稍后再试")}))},echartsInit:function(){console.log("开始初始化"),this.$echarts.init(document.getElementById("speed")).setOption({title:{text:"关系查询耗时对比(s)"},tooltip:{},xAxis:{data:["mysql","neo4j","hive"]},yAxis:{},series:[{name:"查询耗时(s)",type:"bar",data:[this.mysql_speed,this.neo4j_speed,this.spark_speed]}]})}}}),r=n,i=(a("9a2b"),a("1805")),l=Object(i["a"])(r,s,o,!1,null,"b7ac5e7a",null);t["default"]=l.exports},"9a2b":function(e,t,a){"use strict";a("b7fe")},b7fe:function(e,t,a){}}]);